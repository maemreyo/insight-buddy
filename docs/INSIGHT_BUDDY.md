# T√†i Li·ªáu H·ªá Th·ªëng: Chrome Extension "Insight Buddy"

## Ki·∫øn Tr√∫c T·ªïng Quan

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Content       ‚îÇ   Extension     ‚îÇ   UI Layer      ‚îÇ
‚îÇ   Detection     ‚îÇ   Core          ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ                 ‚îÇ                 ‚îÇ                 ‚îÇ
‚îÇ - Text Scanner  ‚îÇ - Message Hub   ‚îÇ - Floating Icon ‚îÇ
‚îÇ - Paragraph     ‚îÇ - State Manager ‚îÇ - Context Menu  ‚îÇ
‚îÇ   Detector      ‚îÇ - Event Router  ‚îÇ - Sidebar       ‚îÇ
‚îÇ - Context       ‚îÇ                 ‚îÇ - Mini Menu     ‚îÇ
‚îÇ   Builder       ‚îÇ                 ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ                 ‚îÇ                 ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ                 ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ   AI Module   ‚îÇ ‚îÇ  Storage      ‚îÇ
          ‚îÇ               ‚îÇ ‚îÇ  Module       ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ               ‚îÇ ‚îÇ               ‚îÇ
          ‚îÇ - GPT/Gemini  ‚îÇ ‚îÇ - Cache       ‚îÇ
          ‚îÇ - Prompts     ‚îÇ ‚îÇ - History     ‚îÇ
          ‚îÇ - Response    ‚îÇ ‚îÇ - Settings    ‚îÇ
          ‚îÇ   Parser      ‚îÇ ‚îÇ               ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## F1: T·ª± ƒê·ªông Ph√°t Hi·ªán V√† Hi·ªÉn Th·ªã Floating Icons

### M√¥ T·∫£

T·ª± ƒë·ªông qu√©t trang web, ph√°t hi·ªán c√°c ƒëo·∫°n vƒÉn v√† hi·ªÉn th·ªã icon nh·ªè b√™n c·∫°nh ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ t∆∞∆°ng t√°c nhanh.

### Components Li√™n Quan

- **content-extractor**: Ph√°t hi·ªán ƒëo·∫°n vƒÉn
- **ui-components**: FloatingIcon component
- **storage**: Cache v·ªã tr√≠ icons ƒë√£ hi·ªÉn th·ªã

### Implementation Details

#### 1.1 Content Scanner

```javascript
// S·ª≠ d·ª•ng content-extractor module
const paragraphDetector = {
  scanPage() {
    // Detect all text blocks > 50 words
    // Filter out navigation, ads, comments
    // Return array of {element, text, position}
  },

  shouldShowIcon(textBlock) {
    // Rules: min length, not duplicate, content type
    return textBlock.wordCount > 50 &&
           !textBlock.isNavigation &&
           !this.isAlreadyProcessed(textBlock);
  }
}
```

#### 1.2 Floating Icon Manager

```javascript
// S·ª≠ d·ª•ng ui-components module
const floatingIconManager = {
  createIcon(textBlock) {
    // Create floating icon v·ªõi position absolute
    // Attach event listeners
    // Add to DOM
  },

  positionIcon(icon, textBlock) {
    // Calculate optimal position (top-right c·ªßa paragraph)
    // Handle viewport boundaries
    // Handle page scroll
  },

  handleIconClick(icon, textBlock) {
    // Show mini menu v·ªõi quick actions
    // Track interaction
  }
}
```

#### 1.3 Viewport Manager

```javascript
const viewportManager = {
  observeIntersection() {
    // Ch·ªâ t·∫°o icons cho paragraphs trong viewport
    // Lazy load ƒë·ªÉ t·ªëi ∆∞u performance
  },

  handleScroll() {
    // Update icon positions
    // Hide/show icons based on viewport
  }
}
```

### Acceptance Criteria

- [ ] T·ª± ƒë·ªông ph√°t hi·ªán paragraphs > 50 t·ª´ tr√™n m·ªçi trang web
- [ ] Hi·ªÉn th·ªã floating icon ·ªü v·ªã tr√≠ kh√¥ng che khu·∫•t n·ªôi dung
- [ ] Icons ch·ªâ xu·∫•t hi·ªán khi hover ho·∫∑c khi paragraph ƒë∆∞·ª£c focus
- [ ] Performance t·ªët tr√™n c√°c trang c√≥ nhi·ªÅu n·ªôi dung
- [ ] Icons kh√¥ng xu·∫•t hi·ªán tr√™n ads, navigation, comments

---

## F2: Context Menu Integration

### M√¥ T·∫£

Cho ph√©p ng∆∞·ªùi d√πng b√¥i ƒëen text b·∫•t k·ª≥ v√† nh·∫•p chu·ªôt ph·∫£i ƒë·ªÉ access c√°c t√≠nh nƒÉng ph√¢n t√≠ch.

### Components Li√™n Quan

- **ui-components**: ContextMenu component
- **content-extractor**: Text selection handler
- **analysis**: Analysis dispatcher

### Implementation Details

#### 2.1 Selection Handler

```javascript
// Extension c·ªßa content-extractor module
const selectionHandler = {
  getSelectedText() {
    // Get user selection v·ªõi context
    // Clean v√† validate text
    // Return {text, context, element}
  },

  getSelectionContext(selectedText, element) {
    // L·∫•y surrounding text ƒë·ªÉ AI hi·ªÉu context
    // Get article title, author n·∫øu c√≥
    // Return contextual information
  }
}
```

#### 2.2 Context Menu Builder

```javascript
// S·ª≠ d·ª•ng ui-components module
const contextMenuBuilder = {
  buildMenu(selectedText) {
    return [
      { id: 'summarize', label: 'T√≥m t·∫Øt ƒëo·∫°n n√†y', icon: 'üìù' },
      { id: 'explain', label: 'Gi·∫£i th√≠ch thu·∫≠t ng·ªØ', icon: 'üí°' },
      { id: 'critique', label: 'ƒê·∫∑t c√¢u h·ªèi ph·∫£n bi·ªán', icon: 'ü§î' },
      { id: 'context', label: 'T·ª´ ƒëi·ªÉn ng·ªØ c·∫£nh', icon: 'üìö' },
      { id: 'bias', label: 'Ki·ªÉm tra thi√™n v·ªã', icon: '‚öñÔ∏è' }
    ];
  },

  handleMenuAction(action, selectedText, context) {
    // Route to appropriate analysis function
    // Show loading state
    // Display results
  }
}
```

#### 2.3 Chrome Extension Context Menu

```javascript
// manifest.json permissions
"permissions": ["contextMenus", "activeTab"]

// background.js
chrome.contextMenus.create({
  id: "analyzeText",
  title: "Ph√¢n t√≠ch v·ªõi AI",
  contexts: ["selection"]
});
```

### Acceptance Criteria

- [ ] Context menu xu·∫•t hi·ªán khi b√¥i ƒëen text > 10 t·ª´
- [ ] Menu c√≥ c√°c options ph√π h·ª£p v·ªõi content type
- [ ] Ho·∫°t ƒë·ªông tr√™n m·ªçi website
- [ ] C√≥ keyboard shortcuts cho power users
- [ ] Loading states r√µ r√†ng khi processing

---

## F3: AI Analysis Features

### M√¥ T·∫£

T√≠ch h·ª£p c√°c t√≠nh nƒÉng ph√¢n t√≠ch th√¥ng minh s·ª≠ d·ª•ng AI module c√≥ s·∫µn.

### Components Li√™n Quan

- **ai**: Core AI processing
- **analysis**: Analysis orchestration
- **content-extractor**: Context building
- **storage**: Results caching

### Implementation Details

#### 3.1 Analysis Dispatcher

```javascript
// Extension c·ªßa analysis module
const analysisDispatcher = {
  async analyzeText(text, analysisType, context) {
    // Validate input
    // Check cache first
    // Route to appropriate analyzer
    // Cache results
    return result;
  },

  getAnalysisPrompt(type, text, context) {
    const prompts = {
      summarize: `T√≥m t·∫Øt ng·∫Øn g·ªçn ƒëo·∫°n vƒÉn sau trong ng·ªØ c·∫£nh: ${context.title}`,
      explain: `Gi·∫£i th√≠ch c√°c thu·∫≠t ng·ªØ kh√≥ hi·ªÉu trong ƒëo·∫°n vƒÉn sau`,
      critique: `ƒê·∫∑t 3 c√¢u h·ªèi ph·∫£n bi·ªán s√¢u s·∫Øc v·ªÅ n·ªôi dung n√†y`,
      bias: `Ph√¢n t√≠ch ng√¥n ng·ªØ thi√™n v·ªã ho·∫∑c c·∫£m x√∫c trong ƒëo·∫°n vƒÉn`,
      expand: `G·ª£i √Ω 5 t·ª´ kh√≥a ƒë·ªÉ t√¨m hi·ªÉu th√™m v·ªÅ ch·ªß ƒë·ªÅ n√†y`
    };
    return prompts[type];
  }
}
```

#### 3.2 Specialized Analyzers

```javascript
// M·ªü r·ªông analysis module
const criticalThinkingAnalyzer = {
  async generateQuestions(text, context) {
    // T·∫°o c√¢u h·ªèi ph·∫£n bi·ªán
    // Focus on logic, evidence, assumptions
  },

  async detectBias(text) {
    // Ph√°t hi·ªán ng√¥n ng·ªØ thi√™n v·ªã
    // Emotional language detection
    // Suggest neutral alternatives
  },

  async expandPerspective(text, context) {
    // Suggest related topics
    // Alternative viewpoints
    // Recommended searches
  }
}
```

#### 3.3 Result Formatter

```javascript
const resultFormatter = {
  formatSummary(aiResponse) {
    return {
      type: 'summary',
      content: aiResponse.summary,
      keyPoints: aiResponse.keyPoints,
      confidence: aiResponse.confidence
    };
  },

  formatQuestions(aiResponse) {
    return {
      type: 'questions',
      questions: aiResponse.questions.map(q => ({
        question: q.text,
        category: q.type, // logic, evidence, assumption
        explanation: q.reasoning
      }))
    };
  }
}
```

### Acceptance Criteria

- [ ] 5 lo·∫°i analysis ch√≠nh: t√≥m t·∫Øt, gi·∫£i th√≠ch, ph·∫£n bi·ªán, thi√™n v·ªã, m·ªü r·ªông
- [ ] Response time < 3 seconds cho m·ªói analysis
- [ ] K·∫øt qu·∫£ ƒë∆∞·ª£c cache ƒë·ªÉ tr√°nh duplicate calls
- [ ] Fallback handling khi AI service unavailable
- [ ] Clear confidence indicators cho m·ªói k·∫øt qu·∫£

---

## F4: Results Sidebar

### M√¥ T·∫£

Sidebar th·ªëng nh·∫•t ƒë·ªÉ hi·ªÉn th·ªã k·∫øt qu·∫£ ph√¢n t√≠ch, history v√† settings.

### Components Li√™n Quan

- **ui-components**: Sidebar, ResultCard components
- **storage**: History management
- **analysis**: Result formatting

### Implementation Details

#### 4.1 Sidebar Architecture

```javascript
// S·ª≠ d·ª•ng ui-components module
const sidebarManager = {
  initialize() {
    // Create sidebar DOM structure
    // Set up event listeners
    // Load initial state
  },

  show(result) {
    // Animate sidebar in
    // Display new result
    // Update history
  },

  hide() {
    // Animate sidebar out
    // Maintain state
  }
}
```

#### 4.2 Result Display Components

```javascript
const resultComponents = {
  SummaryCard: {
    render(summary) {
      return `
        <div class="result-card summary">
          <h3>üìù T√≥m T·∫Øt</h3>
          <p>${summary.content}</p>
          <ul>${summary.keyPoints.map(p => `<li>${p}</li>`).join('')}</ul>
        </div>
      `;
    }
  },

  QuestionsCard: {
    render(questions) {
      return `
        <div class="result-card questions">
          <h3>ü§î C√¢u H·ªèi Ph·∫£n Bi·ªán</h3>
          ${questions.questions.map(q => `
            <div class="question-item">
              <strong>${q.question}</strong>
              <p class="explanation">${q.explanation}</p>
            </div>
          `).join('')}
        </div>
      `;
    }
  }
}
```

#### 4.3 History Manager

```javascript
// Extension c·ªßa storage module
const historyManager = {
  addResult(result, context) {
    // Add to session history
    // Limit to last 10 results
    // Persist important results
  },

  getPageHistory() {
    // Get all results for current page
    // Group by analysis type
  },

  pinResult(resultId) {
    // Pin important results
    // Persist across sessions
  }
}
```

#### 4.4 Settings Panel

```javascript
const settingsPanel = {
  render() {
    return `
      <div class="settings-panel">
        <h3>‚öôÔ∏è C√†i ƒê·∫∑t</h3>
        <label>
          <input type="checkbox" id="enableFloatingIcons">
          Hi·ªán floating icons
        </label>
        <label>
          <input type="checkbox" id="enableAutoAnalysis">
          Ph√¢n t√≠ch t·ª± ƒë·ªông
        </label>
        <select id="aiModel">
          <option value="gpt">GPT-4</option>
          <option value="gemini">Gemini Pro</option>
        </select>
      </div>
    `;
  }
}
```

### Acceptance Criteria

- [ ] Sidebar slide in/out smoothly t·ª´ ph·∫£i
- [ ] Hi·ªÉn th·ªã t·ªëi ƒëa 10 results g·∫ßn nh·∫•t
- [ ] Pin/unpin results quan tr·ªçng
- [ ] Settings panel ƒë·∫ßy ƒë·ªß options
- [ ] Responsive design cho different screen sizes
- [ ] Clear separation gi·ªØa different result types

---

## F5: Mini Menu t·ª´ Floating Icons

### M√¥ T·∫£

Menu compact xu·∫•t hi·ªán khi click floating icon, cung c·∫•p quick actions.

### Components Li√™n Quan

- **ui-components**: MiniMenu component
- **analysis**: Quick analysis functions

### Implementation Details

#### 5.1 Mini Menu Component

```javascript
// S·ª≠ d·ª•ng ui-components module
const miniMenu = {
  create(textBlock, position) {
    return `
      <div class="mini-menu" style="top: ${position.y}px; left: ${position.x}px">
        <button data-action="quickSummary">üìù T√≥m t·∫Øt</button>
        <button data-action="askQuestions">ü§î ƒê·∫∑t c√¢u h·ªèi</button>
        <button data-action="explainTerms">üí° Gi·∫£i th√≠ch</button>
        <button data-action="more">‚ûï Th√™m</button>
      </div>
    `;
  },

  positionMenu(iconElement) {
    // Calculate position to avoid viewport overflow
    // Position relative to icon
    return {x: calculatedX, y: calculatedY};
  },

  handleAction(action, textBlock) {
    // Quick analysis without opening sidebar
    // Show inline results or tooltip
  }
}
```

#### 5.2 Quick Analysis Functions

```javascript
const quickAnalysis = {
  async quickSummary(text) {
    // 1-sentence summary
    // Show as tooltip
  },

  async quickQuestions(text) {
    // 1-2 critical questions
    // Show as expandable tooltip
  },

  async quickExplain(text) {
    // Explain 1-2 difficult terms
    // Show as inline definitions
  }
}
```

#### 5.3 Tooltip Display

```javascript
const tooltipManager = {
  show(content, position, type) {
    // Create tooltip with appropriate styling
    // Auto-hide after timeout
    // Handle multiple tooltips
  },

  createTooltip(content, type) {
    const templates = {
      summary: `<div class="tooltip summary">${content}</div>`,
      questions: `<div class="tooltip questions">${content}</div>`,
      explanation: `<div class="tooltip explanation">${content}</div>`
    };
    return templates[type];
  }
}
```

### Acceptance Criteria

- [ ] Menu xu·∫•t hi·ªán immediately khi click floating icon
- [ ] 4 quick actions: t√≥m t·∫Øt, c√¢u h·ªèi, gi·∫£i th√≠ch, th√™m
- [ ] Results hi·ªÉn th·ªã trong tooltip kh√¥ng che khu·∫•t n·ªôi dung
- [ ] Menu t·ª± ƒë·ªông hide khi click outside
- [ ] Keyboard navigation support
- [ ] Smooth animations cho show/hide

---

## F6: Keyboard Shortcuts & Accessibility

### M√¥ T·∫£

H·ªó tr·ª£ keyboard shortcuts v√† accessibility features.

### Components Li√™n Quan

- **ui-components**: Keyboard handler
- All components: Accessibility attributes

### Implementation Details

#### 6.1 Keyboard Shortcuts

```javascript
const keyboardHandler = {
  shortcuts: {
    'Ctrl+Shift+A': 'analyzeSelection',
    'Ctrl+Shift+S': 'toggleSidebar',
    'Ctrl+Shift+Q': 'quickQuestions',
    'Escape': 'hideAllMenus'
  },

  handleKeydown(event) {
    const combo = this.getKeyCombo(event);
    if (this.shortcuts[combo]) {
      event.preventDefault();
      this.executeAction(this.shortcuts[combo]);
    }
  }
}
```

#### 6.2 Accessibility Features

```javascript
const accessibilityManager = {
  addAriaLabels() {
    // Add proper ARIA labels to all interactive elements
    // Screen reader support
  },

  manageFocus() {
    // Proper focus management for modals, menus
    // Focus trapping trong sidebar
  },

  addHighContrastMode() {
    // High contrast themes
    // Larger text options
  }
}
```

### Acceptance Criteria

- [ ] 5 keyboard shortcuts ch√≠nh ho·∫°t ƒë·ªông
- [ ] Tab navigation through all UI elements
- [ ] Screen reader compatibility
- [ ] High contrast mode option
- [ ] Focus indicators r√µ r√†ng
- [ ] ARIA labels cho t·∫•t c·∫£ interactive elements

---

## F7: Error Handling & Offline Support

### M√¥ T·∫£

Robust error handling v√† fallback mechanisms.

### Components Li√™n Quan

- **ai**: Error handling cho API calls
- **storage**: Offline caching
- **ui-components**: Error display

### Implementation Details

#### 7.1 Error Handler

```javascript
const errorHandler = {
  handleAIError(error) {
    const errorTypes = {
      'rate_limit': 'API rate limit reached. Please try again in a few minutes.',
      'network': 'Network error. Check your connection.',
      'invalid_key': 'Invalid API key. Please check settings.',
      'content_too_long': 'Text too long for analysis. Please select a shorter passage.'
    };

    return errorTypes[error.type] || 'Unknown error occurred';
  },

  showErrorToast(message) {
    // Non-intrusive error display
    // Auto-dismiss after 5 seconds
  }
}
```

#### 7.2 Offline Support

```javascript
const offlineManager = {
  cacheAnalysis(text, result) {
    // Cache successful analyses
    // Use for offline viewing
  },

  isOffline() {
    return !navigator.onLine;
  },

  showOfflineMessage() {
    // Show helpful offline message
    // Suggest cached results
  }
}
```

### Acceptance Criteria

- [ ] Graceful degradation khi API kh√¥ng available
- [ ] Clear error messages cho different error types
- [ ] Cached results available offline
- [ ] Retry mechanisms cho transient errors
- [ ] Network status indicator

---

## F8: Settings & Customization

### M√¥ T·∫£

Comprehensive settings panel cho user customization.

### Implementation Details

#### 8.1 Settings Manager

```javascript
// Extension c·ªßa storage module
const settingsManager = {
  defaultSettings: {
    enableFloatingIcons: true,
    enableAutoAnalysis: false,
    aiModel: 'gpt',
    analysisLanguage: 'vi',
    maxCacheSize: 100,
    showConfidenceScores: true
  },

  getSetting(key) {
    // Get setting v·ªõi fallback to default
  },

  updateSetting(key, value) {
    // Update setting v√† sync across tabs
    // Trigger relevant updates
  }
}
```

#### 8.2 Customization Options

```javascript
const customizationOptions = {
  themes: ['light', 'dark', 'auto'],
  languages: ['vi', 'en', 'auto-detect'],
  aiModels: ['gpt-4', 'gemini-pro', 'claude'],
  iconPositions: ['top-right', 'top-left', 'bottom-right'],
  analysisTypes: {
    enabled: ['summarize', 'critique', 'explain'],
    disabled: ['bias', 'expand']
  }
}
```

### Acceptance Criteria

- [ ] Comprehensive settings panel
- [ ] Settings persist across browser sessions
- [ ] Real-time preview c·ªßa customizations
- [ ] Import/export settings
- [ ] Reset to defaults option

---

## Integration Points

### Module Communication

```javascript
// Message passing architecture
const messageHub = {
  // Content script -> Background
  requestAnalysis: (text, type) => {},

  // Background -> Content script
  analysisComplete: (result) => {},

  // Popup -> Background
  updateSettings: (settings) => {},

  // Between content scripts
  syncState: (state) => {}
}
```

### Data Flow

```
User Action ‚Üí UI Component ‚Üí Analysis Dispatcher ‚Üí AI Module ‚Üí Result Formatter ‚Üí UI Update ‚Üí Storage
```

### Performance Targets

- Initial page scan: < 100ms
- Floating icon creation: < 50ms per icon
- AI analysis: < 3 seconds
- Sidebar open/close: < 200ms
- Memory usage: < 50MB per tab

### Testing Strategy

- Unit tests cho m·ªói module
- Integration tests cho user flows
- Performance tests v·ªõi large pages
- Cross-browser compatibility tests
- Accessibility audits
